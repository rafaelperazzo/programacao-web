var stopclock=0,myclock='',timeleft,hours,minutes,secs,javatimeDate=new Date(),javatime=javatimeDate.getTime();javatime=Math.floor(javatime/1e3);if(typeof clocksettings!='undefined'){if(clocksettings.starttime)starttime=parseInt(clocksettings.starttime);if(clocksettings.servertime)servertime=parseInt(clocksettings.servertime);if(clocksettings.testlength)testlength=parseInt(clocksettings.testlength)};difference=javatime-servertime;starttime=starttime+difference
function show_clock(){currentDate=new Date();current=currentDate.getTime();current=Math.floor(current/1e3);var mytime='',myclock=document.getElementById("lesson-timer");if(current>starttime+testlength){mytime+=M.util.get_string('timeisup','lesson');stopclock=1}else{timeleft=starttime+testlength-current;if(timeleft<60)myclock.className="timeleft1";hours=Math.floor(timeleft/3600);timeleft=timeleft-(hours*3600);minutes=Math.floor(timeleft/60);secs=timeleft-(minutes*60);if(secs<10)secs="0"+secs;if(minutes<10)minutes="0"+minutes;mytime+=hours+":"+minutes+":"+secs};myclock.innerHTML=mytime;if(stopclock==0)setTimeout("show_clock()",1e3)}